

<!DOCTYPE html>
<html lang="en" color-mode=light>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>个人运行平台项目 - NP&#39;s Blog</title>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="google" content="notranslate" />
  
  <meta name="description" content="个人运动平台项目1、项目概述​        致力于做...">
  <meta name="author" content="thyme1228">
  <link rel="icon" href="/images/icons/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="icon" href="/images/icons/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="apple-touch-icon" href="/images/icons/apple-touch-icon.png" sizes="180x180">
  <meta rel="mask-icon" href="/images/icons/stun-logo.svg" color="#333333">
  
    <meta rel="msapplication-TileImage" content="/images/icons/favicon-144x144.png">
    <meta rel="msapplication-TileColor" content="#000000">
  

  
<link rel="stylesheet" href="/css/style.css">


  
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1445822_r673sha78lq.css">

  

  
    
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css">

  

  
    
      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/xcode.min.css" name="highlight-style" mode="light">

      
        
        
<link rel="stylesheet" href="https://cdn.bootcss.com/highlight.js/9.18.1/styles/solarized-dark.min.css" name="highlight-style" mode="dark">

      
  

  <script>
    var CONFIG = window.CONFIG || {};
    var ZHAOO = window.ZHAOO || {};
    CONFIG = {
      isHome: false,
      fancybox: true,
      pjax: false,
      lazyload: {
        enable: true,
        only_post: 'false',
        loading: '[object Object]'
      },
      donate: {
        enable: false,
        alipay: 'https://pic.izhaoo.com/alipay.jpg',
        wechat: 'https://pic.izhaoo.com/wechat.jpg'
      },
      galleries: {
        enable: false
      },
      fab: {
        enable: true,
        always_show: false
      },
      carrier: {
        enable: true
      },
      daovoice: {
        enable: false
      },
      preview: {
        background: {
          default: '',
          api: ''
        },
        motto: {
          default: '我在开了灯的床头下，想问问自己的心啊。',
          typing: true,
          api: 'https://v2.jinrishici.com/one.json',
          data_contents: '["data","content"]'
        },
      },
      qrcode: {
        enable: true,
        type: 'url',
        image: 'https://pic.izhaoo.com/weapp-code.jpg',
      },
      toc: {
        enable: true
      },
      scrollbar: {
        type: 'default'
      },
      notification: {
        enable: false,
        delay: 4500,
        list: '',
        page_white_list: '',
        page_black_list: ''
      },
      search: {
        enable: false,
        path: ''
      }
    }
  </script>

  

  

<meta name="generator" content="Hexo 5.4.0"></head>

<body class="lock-screen">
  <div class="loading"></div>
  
    


  <nav class="navbar">
    <div class="left">
      
        <i class="iconfont iconhome j-navbar-back-home"></i>
      
      
        <i class="iconfont iconqrcode j-navbar-qrcode"></i>
      
      
        <i class="iconfont iconmoono" id="color-toggle" color-toggle="light"></i>
      
      
    </div>
    <div class="center">个人运行平台项目</div>
    <div class="right">
      <i class="iconfont iconmenu j-navbar-menu"></i>
    </div>
    
      <div id="qrcode-navbar"></div>
    
  </nav>

  
  

<nav class="menu">
  <div class="menu-container">
    <div class="menu-close">
      <i class="iconfont iconbaseline-close-px"></i>
    </div>
    <ul class="menu-content"><li class="menu-item">
        <a href="/ " class="underline "> 首页</a>
      </li><li class="menu-item">
        <a href="/galleries/ " class="underline "> 摄影</a>
      </li><li class="menu-item">
        <a href="/archives/ " class="underline "> 归档</a>
      </li><li class="menu-item">
        <a href="/tags/ " class="underline "> 标签</a>
      </li><li class="menu-item">
        <a href="/categories/ " class="underline "> 分类</a>
      </li><li class="menu-item">
        <a href="/about/ " class="underline "> 关于</a>
      </li></ul>
    
      <div class="menu-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
    
  </div>
</nav>
  <main id="main">
  <div class="article-wrap">
    <div class="row container">
      <div class="col-xl-3"></div>
      <div class="col-xl-6"><article class="article">
  <div class="wrap">
    <section class="head">
  <img   class="lazyload" data-original="/images/cover/5.jpg" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="  draggable="false">
  <div class="head-mask">
    <h1 class="head-title">个人运行平台项目</h1>
    <div class="head-info">
      <span class="post-info-item"><i class="iconfont iconcalendar"></i>July 12, 2021</span>
      
      <span class="post-info-item"><i class="iconfont iconfont-size"></i>38445</span>
    </div>
  </div>
</section>
    <section class="main">
      <section class="content">
        <h1 id="个人运动平台项目"><a href="#个人运动平台项目" class="headerlink" title="个人运动平台项目"></a>个人运动平台项目</h1><h2 id="1、项目概述"><a href="#1、项目概述" class="headerlink" title="1、项目概述"></a>1、项目概述</h2><p>​        致力于做一款前后分离的个人健康平台，旨在配合热爱运动和健身的朋友们开发一款能够完成卡路里统计，运动计划编写，科学食物搭配，以及方便与其它朋友交流心得的平台。</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E8%BF%90%E5%8A%A8%E5%B9%B3%E5%8F%B0%E5%B1%95%E7%A4%BA%E9%A1%B5.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<h3 id="1-1-需求分析"><a href="#1-1-需求分析" class="headerlink" title="1.1 需求分析"></a>1.1 需求分析</h3><h4 id="1-1-1、痛点分析"><a href="#1-1-1、痛点分析" class="headerlink" title="1.1.1、痛点分析"></a>1.1.1、痛点分析</h4><p>​        健康平台中有需要许多的第三方数据，比如：运动卡路里的消耗、食品卡路里的提供、以及各种健身运动的卡路里消耗。需要调取大量的api接口，数据库设计考虑用户分级还有管理员权限设置。比如：普通用户和vip查看的内容区分以及功能区分。管理分为超级管理员和普通管理员。</p>
<p>​        页面层面使用vue+elementUI开发，分为前台管理员系统和后台业务模块。需要设计的内容有：登录、后台系统（权限管理、运动平台等）、前台业务（卡路里查询，个人计划制定，食品划分等）。</p>
<p>​        后台采用SpringBoot+Mybatis开发，需要提前编写各个模块的路由方便分发，创建关系型数据库。大致分为：用户、功能分支、运动列表，计划列表，卡路里列表等。</p>
<h4 id="1-1-2、项目架构"><a href="#1-1-2、项目架构" class="headerlink" title="1.1.2、项目架构"></a>1.1.2、项目架构</h4><p>采取前后端分离开发，前端为vue后端为java。使用springBoot做跨域请求</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E5%9F%BA%E6%9C%AC%E6%9E%B6%E6%9E%84.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p>前端将在vs code中的Tomcat下部署；后端将在IDEA中集成的Tomcat下部署。</p>
<h2 id="2、框架搭建"><a href="#2、框架搭建" class="headerlink" title="2、框架搭建"></a>2、框架搭建</h2><p>搭建VUE+SpringBoot环境，并且使用一个登录模块来测试。</p>
<h3 id="2-1、后台环境搭建"><a href="#2-1、后台环境搭建" class="headerlink" title="2.1、后台环境搭建"></a>2.1、后台环境搭建</h3><h4 id="2-1-1、创建SpringBoot-项目"><a href="#2-1-1、创建SpringBoot-项目" class="headerlink" title="2.1.1、创建SpringBoot 项目"></a>2.1.1、创建SpringBoot 项目</h4><p>使用IDEA快速搭建SpringBoot环境：File–New–Project–Spring Initializr–Next*2–选择模块【WEB（Spring WEB）&amp;&amp;SQL（JDBC API、MyBatis Framework，MySql Driver）】</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E5%88%9B%E5%BB%BAspringboot-1.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p><img   class="lazyload" data-original="/images/sportproject/%E5%88%9B%E5%BB%BAspringboot-2.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p><img   class="lazyload" data-original="/images/sportproject/springboot-3.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p>因为mybatis需要一个数据源，所以配置一个application.yml</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># mysql</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-comment">#MySQL配置</span><br>    <span class="hljs-attr">driverClassName:</span>  <span class="hljs-string">com.mysql.cj.jdbc.Driver</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/easyproject?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=UTC</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span><br>  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.demo.model</span><br>  <br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">9000</span><br></code></pre></td></tr></table></figure>

<p>启动项目：<a target="_blank" rel="noopener" href="http://localhost:9000/">http://localhost:9000</a></p>
<h4 id="2-1-2、创建测试路由路径"><a href="#2-1-2、创建测试路由路径" class="headerlink" title="2.1.2、创建测试路由路径"></a>2.1.2、创建测试路由路径</h4><p>编写测试Controller，注意返回值和路径映射</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestController</span> </span>&#123;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/test&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">test</span><span class="hljs-params">()</span></span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;This is ok.&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>运行结果：</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C1.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<h4 id="2-1-3、跨域配置"><a href="#2-1-3、跨域配置" class="headerlink" title="2.1.3、跨域配置"></a>2.1.3、跨域配置</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WebConfig</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">WebMvcConfigurerAdapter</span> </span>&#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">addCorsMappings</span><span class="hljs-params">(CorsRegistry registry)</span> </span>&#123;<br>        registry.addMapping(<span class="hljs-string">&quot;/**&quot;</span>)<br>                .allowedOrigins(<span class="hljs-string">&quot;http://localhost:8080&quot;</span>, <span class="hljs-string">&quot;null&quot;</span>)<br>                .allowedMethods(<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;GET&quot;</span>, <span class="hljs-string">&quot;PUT&quot;</span>, <span class="hljs-string">&quot;OPTIONS&quot;</span>, <span class="hljs-string">&quot;DELETE&quot;</span>)<br>                .maxAge(<span class="hljs-number">3600</span>)<br>                .allowCredentials(<span class="hljs-keyword">true</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-1-4、创建logincontroller"><a href="#2-1-4、创建logincontroller" class="headerlink" title="2.1.4、创建logincontroller"></a>2.1.4、创建logincontroller</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginController</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    UserDao userDao;<br><br>    <span class="hljs-meta">@CrossOrigin</span><br>    <span class="hljs-meta">@RequestMapping(&quot;/login&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">userLogin</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;User : &quot;</span> + user);<br>        String str = <span class="hljs-string">&quot;error&quot;</span>;<br>        <span class="hljs-keyword">int</span> count = userDao.getUserByMassage(user.getUsername(), user.getPassword());<br>        <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) &#123;<br>            str = <span class="hljs-string">&quot;ok&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> str;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-1-5、创建UserDao"><a href="#2-1-5、创建UserDao" class="headerlink" title="2.1.5、创建UserDao"></a>2.1.5、创建UserDao</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserByMassage</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;username&quot;)</span> String username, <span class="hljs-meta">@Param(&quot;password&quot;)</span> String password)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2-1-6、创建UserMapper-xml"><a href="#2-1-6、创建UserMapper-xml" class="headerlink" title="2.1.6、创建UserMapper.xml"></a>2.1.6、创建UserMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span>  <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.dao.UserDao&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByMassage&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>       	SELECT count(id) FROM easyUser<br>       	WHERE username=#&#123;username&#125; AND password=#&#123;password&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>



<h3 id="2-2、前台开发"><a href="#2-2、前台开发" class="headerlink" title="2.2、前台开发"></a>2.2、前台开发</h3><h4 id="2-2-1、创建vue项目"><a href="#2-2-1、创建vue项目" class="headerlink" title="2.2.1、创建vue项目"></a>2.2.1、创建vue项目</h4><p>win+R输入cmd打开dos，运行命令：vue ui，进入：Vue 项目管理器</p>
<p><img   class="lazyload" data-original="/images/sportproject/vue%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%99%A8.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p>创建项目：</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E5%88%9B%E5%BB%BAvue%E9%A1%B9%E7%9B%AE.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p>手动创建配置，选择功能：Babel、Router、使用配置然后创建项目。添加插件<code>elementUI</code></p>
<p>添加依赖：<code>axios</code>、<code>less-loader</code>、<code>less</code> 然后运行vue项目</p>
<p><img   class="lazyload" data-original="/images/sportproject/%E8%BF%90%E8%A1%8Cvue.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<p><img   class="lazyload" data-original="/images/sportproject/vue%E9%A1%B9%E7%9B%AE%E9%BB%98%E8%AE%A4%E9%A6%96%E9%A1%B5.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<h4 id="2-2-2、修改项目"><a href="#2-2-2、修改项目" class="headerlink" title="2.2.2、修改项目"></a>2.2.2、修改项目</h4><p>App.vue 删除多余分支，删除About.vue和Home.vue文件，剔除index.js的分支。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br> 	App 根组件<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> VueRouter <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><br>Vue.use(VueRouter)<br><br><span class="hljs-keyword">const</span> routes = [<br>]<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> VueRouter(&#123;<br>  routes<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure>

<p>之后能正常运行。</p>
<h4 id="2-2-3、创建登录页面"><a href="#2-2-3、创建登录页面" class="headerlink" title="2.2.3、创建登录页面"></a>2.2.3、创建登录页面</h4><p>创建Login.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        Login<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">    </span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>修改App.vue把app根组件换成<code>&lt;router-view&gt;</code>标签,自定义路由,重定向到login，也可以直接配置路径为”/“访问到login.vue</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> routes = [<br>&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>  <span class="hljs-attr">redirect</span>:<span class="hljs-string">&#x27;/login&#x27;</span><br>&#125;,<br>&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>  <span class="hljs-attr">component</span>: Login<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>添加全局样式：assets/css/global.css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 全局式样 */</span><br><span class="hljs-selector-tag">html</span>,<span class="hljs-selector-tag">body</span>,<span class="hljs-selector-id">#app</span>&#123;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0px</span>;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>main.js里添加全局样式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/css/global.css&#x27;</span><span class="hljs-comment">// 添加全局样式</span><br></code></pre></td></tr></table></figure>

<p>创建需要的icon文件夹 assets/font</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/font/iconfont.css&#x27;</span><span class="hljs-comment">// 添加font-icon</span><br></code></pre></td></tr></table></figure>

<p>修改login.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login_container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login_box&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar_box&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--头像--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../assets/logo.png&quot;</span> <span class="hljs-attr">alt</span> /&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-comment">&lt;!--添加表单--&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span></span><br><span class="hljs-tag">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;loginFormRef&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;loginForm&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;loginRules&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login_form&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;0px&quot;</span></span><br><span class="hljs-tag">      &gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;loginForm.username&quot;</span> <span class="hljs-attr">prefix-icon</span>=<span class="hljs-string">&quot;iconfont icondenglu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;loginForm.password&quot;</span> <span class="hljs-attr">prefix-icon</span>=<span class="hljs-string">&quot;iconfont iconmima&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btns&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;login&quot;</span>&gt;</span>登录<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;resetLoginForm&quot;</span>&gt;</span>重置<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">  <span class="hljs-function"><span class="hljs-title">data</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="javascript">      <span class="hljs-attr">loginForm</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">username</span>: <span class="hljs-string">&quot;username&quot;</span>,</span><br><span class="javascript">        <span class="hljs-attr">password</span>: <span class="hljs-string">&quot;password&quot;</span></span><br><span class="javascript">      &#125;,</span><br><span class="javascript">      <span class="hljs-attr">loginRules</span>: &#123;</span><br><span class="javascript">        <span class="hljs-attr">username</span>: [</span><br><span class="javascript">          &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入用户名&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,</span><br><span class="javascript">          &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;长度在 5 到 8 个字符&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;</span><br><span class="javascript">        ],</span><br><span class="javascript">        <span class="hljs-attr">password</span>: [</span><br><span class="javascript">          &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入密码&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,</span><br><span class="javascript">          &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;密码为 6~8 位&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;</span><br><span class="javascript">        ]</span><br><span class="javascript">      &#125;</span><br><span class="javascript">    &#125;;</span><br><span class="javascript">  &#125;,</span><br><span class="javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">resetLoginForm</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">this</span>.$refs.loginFormRef.resetFields();</span><br><span class="javascript">    &#125;,</span><br><span class="javascript">    <span class="hljs-function"><span class="hljs-title">login</span>(<span class="hljs-params"></span>)</span> &#123;</span><br><span class="javascript">      <span class="hljs-built_in">this</span>.$refs.loginFormRef.validate(<span class="hljs-keyword">async</span> valid =&gt; &#123;</span><br><span class="javascript">        <span class="hljs-keyword">if</span> (!valid) <span class="hljs-keyword">return</span>;</span><br><span class="javascript">        <span class="hljs-comment">// 调用get请求</span></span><br><span class="javascript">        <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span> :res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.post(<span class="hljs-string">&quot;login&quot;</span>, <span class="hljs-built_in">this</span>.loginForm);</span><br><span class="javascript">         <span class="hljs-keyword">if</span> (res == <span class="hljs-string">&quot;ok&quot;</span> ) &#123;</span><br><span class="javascript">           <span class="hljs-built_in">this</span>.$message.success(<span class="hljs-string">&quot;登陆成功！！！&quot;</span>);</span><br><span class="javascript">           <span class="hljs-built_in">this</span>.$router.push(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/home&quot;</span>&#125;);<span class="hljs-comment">// 路由</span></span><br><span class="javascript">         &#125;<span class="hljs-keyword">else</span>&#123;</span><br><span class="javascript">          <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">&quot;登录失败！！！&quot;</span>);</span><br><span class="javascript">         &#125;</span><br><span class="javascript">      &#125;);</span><br><span class="javascript">    &#125;</span><br><span class="javascript">  &#125;</span><br><span class="javascript">&#125;;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css"></span><br><span class="css"></span><br><span class="css">// 跟节点样式</span><br><span class="css"><span class="hljs-selector-class">.login_container</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2b4b6b</span>;</span><br><span class="css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">&#125;</span><br><span class="css"></span><br><span class="css"><span class="hljs-selector-class">.login_box</span> &#123;</span><br><span class="css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">450px</span>;</span><br><span class="css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="css">  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;// 圆角</span><br><span class="css">  <span class="hljs-attribute">position</span>: absolute;// 绝对定位</span><br><span class="css">  <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="css">  <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;</span><br><span class="css">  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);// 根据自己位置 以自己为长度位移</span><br><span class="css"></span><br><span class="css">  <span class="hljs-selector-class">.avatar_box</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">130px</span>;</span><br><span class="css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">130px</span>;</span><br><span class="css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;</span><br><span class="css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; // 加圆角</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="css">    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-number">#ddd</span>;// 盒子阴影</span><br><span class="css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="css">    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate</span>(-<span class="hljs-number">50%</span>, -<span class="hljs-number">50%</span>);</span><br><span class="css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0ee</span>;</span><br><span class="css">    <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">      <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; // 加圆角</span><br><span class="css">      <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#eee</span>;</span><br><span class="css">    &#125;</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-class">.btns</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">display</span>: flex;// 弹性布局</span><br><span class="css">    <span class="hljs-attribute">justify-content</span>: flex-end; // 尾部对齐</span><br><span class="css">  &#125;</span><br><span class="css">  <span class="hljs-selector-class">.login_form</span> &#123;</span><br><span class="css">    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="css">    <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0%</span>;</span><br><span class="css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="css">    <span class="hljs-attribute">box-sizing</span>: border-box;// 设置边框</span><br><span class="css">  &#125;</span><br><span class="css">&#125;</span><br><span class="css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="2-2-4、修改main-js"><a href="#2-2-4、修改main-js" class="headerlink" title="2.2.4、修改main.js"></a>2.2.4、修改main.js</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> Vue <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> App <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./plugins/element.js&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/css/global.css&#x27;</span><br><span class="hljs-comment">// 导入iconfront</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./assets/font/iconfont.css&#x27;</span><br><span class="hljs-comment">// 导入axios</span><br><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br><span class="hljs-comment">// 挂载axios 到Vue的原型prototype的$http</span><br>Vue.prototype.$http = axios<br><span class="hljs-comment">// 设置请求的根路径</span><br>axios.defaults.baseURL = <span class="hljs-string">&quot;http://localhost:9000/&quot;</span><br>axios.interceptors.request.use(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>  <span class="hljs-built_in">console</span>.log(config);<br>  <span class="hljs-comment">// 请求头挂载信息</span><br>  config.headers.Authorization = <span class="hljs-built_in">window</span>.sessionStorage.getItem(<span class="hljs-string">&quot;flag&quot;</span>);<br>  <span class="hljs-comment">// 在最后必须return config</span><br>  <span class="hljs-keyword">return</span> config;<br>&#125;)<br>Vue.config.productionTip = <span class="hljs-literal">false</span><br><br><span class="hljs-keyword">new</span> Vue(&#123;<br>  router,<br>  <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> h(App)<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br></code></pre></td></tr></table></figure>

<h4 id="2-2-5、创建Home页面"><a href="#2-2-5、创建Home页面" class="headerlink" title="2.2.5、创建Home页面"></a>2.2.5、创建Home页面</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        Home<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br> <br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>添加home的路由后访问。</p>
<h2 id="3、完善登录"><a href="#3、完善登录" class="headerlink" title="3、完善登录"></a>3、完善登录</h2><h3 id="3-1-后台开发"><a href="#3-1-后台开发" class="headerlink" title="3.1.后台开发"></a>3.1.后台开发</h3><h4 id="3-1-1、创建user实体"><a href="#3-1-1、创建user实体" class="headerlink" title="3.1.1、创建user实体"></a>3.1.1、创建user实体</h4><table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>int</td>
<td>主键id</td>
</tr>
<tr>
<td>username</td>
<td>String</td>
<td>用户名</td>
</tr>
<tr>
<td>password</td>
<td>String</td>
<td>密码</td>
</tr>
<tr>
<td>email</td>
<td>String</td>
<td>邮箱</td>
</tr>
<tr>
<td>role</td>
<td>String</td>
<td>角色类型</td>
</tr>
<tr>
<td>state</td>
<td>boolean</td>
<td>启用标识</td>
</tr>
</tbody></table>
<h4 id="3-1-2、创建userdao"><a href="#3-1-2、创建userdao" class="headerlink" title="3.1.2、创建userdao"></a>3.1.2、创建userdao</h4><p>会根据用户输入的<code>用户名</code>和<code>密码</code>来获取信息，方法名<code>getUserByMassage</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserByMassage</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;username&quot;)</span> String username, <span class="hljs-meta">@Param(&quot;password&quot;)</span> String password)</span></span>;<br></code></pre></td></tr></table></figure>

<h4 id="3-1-3、编写usermapper"><a href="#3-1-3、编写usermapper" class="headerlink" title="3.1.3、编写usermapper"></a>3.1.3、编写usermapper</h4><p>mybatis的映射文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span>  <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserByMassage&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>       	SELECT count(id) FROM easyUser<br>       	WHERE username=#&#123;username&#125; AND password=#&#123;password&#125; AND state = 1<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>查询条件：<code>SELECT count(id) FROM easyUser WHERE username=&#39;xxx&#39; AND password=&#39;xxx&#39; AND state = 1</code></p>
<h4 id="3-1-4、创建UserController"><a href="#3-1-4、创建UserController" class="headerlink" title="3.1.4、创建UserController"></a>3.1.4、创建UserController</h4><p>使用传递过来的username和password入参dao的<code>getUserByMassage</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/login&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">userLogin</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;User : &quot;</span> + user);<br>        String str = <span class="hljs-string">&quot;error&quot;</span>;<br>        <span class="hljs-keyword">int</span> count = userDao.getUserByMassage(user.getUsername(), user.getPassword());<br>        <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) &#123;<br>            str = <span class="hljs-string">&quot;ok&quot;</span>;<br>        &#125;<br>        <span class="hljs-keyword">return</span> str;<br>    &#125;<br></code></pre></td></tr></table></figure>

<p>查询结果大于0后，证明查询有结果，登录就应该成功，之前我们页面的判断条件是结果返回是否为“ok”。</p>
<p>☆ 如果用户名做了去重这里的判断应该是等于1。</p>
<h4 id="3-1-5、路由守卫"><a href="#3-1-5、路由守卫" class="headerlink" title="3.1.5、路由守卫"></a>3.1.5、路由守卫</h4><p>首先登录成功后，希望设置一个保存信息。所以修改查询语句：</p>
<p><code>SELECT * FROM easyUser WHERE username=&#39;admin&#39; AND password=&#39;123456&#39; AND state = 1</code></p>
<p>修改返回值“ok”，创建map存放查询出的user和flag，转化json字符串，返回在pom.xml里添加json依赖,使用JSON.toJSONString转化对象为json</p>
<p>前台修改接收信息内容，获得登录的user，保存到客户端的 sessionStorage中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-built_in">window</span>.sessionStorage.setItem(<span class="hljs-string">&#x27;flag&#x27;</span>,<span class="hljs-string">&#x27;ok&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p>在index.js里创建路由导航</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 挂载路由导航守卫</span><br>router.beforeEach(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// to:将要访问的路径</span><br>  <span class="hljs-comment">// from:从哪里访问的路径</span><br>  <span class="hljs-comment">// next:之后要做的任务，是一个函数</span><br>  <span class="hljs-comment">//    next（）放行， next（&#x27;/URL&#x27;）强制跳转的路径。</span><br>  <span class="hljs-keyword">if</span> (to.path == <span class="hljs-string">&#x27;/login&#x27;</span>) <span class="hljs-keyword">return</span> next();<span class="hljs-comment">// 访问路径为登录</span><br>  <span class="hljs-comment">// 获取flag</span><br>  <span class="hljs-keyword">const</span> flagStr = <span class="hljs-built_in">window</span>.sessionStorage.getItem(<span class="hljs-string">&quot;flag&quot;</span>);<span class="hljs-comment">// session取值</span><br>  <span class="hljs-keyword">if</span> (!flagStr) <span class="hljs-keyword">return</span> next(<span class="hljs-string">&#x27;/login&#x27;</span>);<span class="hljs-comment">// 没登录去登录</span><br>  next();<br>&#125;)<br><br><span class="hljs-comment">// 出现问题的时候使用</span><br><span class="hljs-keyword">const</span> originalPush = VueRouter.prototype.push<br>VueRouter.prototype.push = <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">push</span>(<span class="hljs-params">location, onResolve, onReject</span>) </span>&#123;<br>  <span class="hljs-keyword">if</span> (onResolve || onReject) <span class="hljs-keyword">return</span> originalPush.call(<span class="hljs-built_in">this</span>, location, onResolve, onReject)<br>  <span class="hljs-keyword">return</span> originalPush.call(<span class="hljs-built_in">this</span>, location).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> err)<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3-1-6、安全退出"><a href="#3-1-6、安全退出" class="headerlink" title="3.1.6、安全退出"></a>3.1.6、安全退出</h4><p>添加安全退出按钮标签</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;logout&quot;</span>&gt;</span>安全退出<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>添加安全退出方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">logout</span>(<span class="hljs-params"></span>)</span> &#123;<br>  <span class="hljs-built_in">window</span>.sessionStorage.clear();<br>  <span class="hljs-built_in">this</span>.$router.push(<span class="hljs-string">&quot;/login&quot;</span>);<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="3-2-数据创建"><a href="#3-2-数据创建" class="headerlink" title="3.2.数据创建"></a>3.2.数据创建</h3><p> 略</p>
<h2 id="4、Home页开发"><a href="#4、Home页开发" class="headerlink" title="4、Home页开发"></a>4、Home页开发</h2><p>根据主页规划，修改Home。</p>
<p><img   class="lazyload" data-original="/images/sportproject/Home%E4%B8%BB%E9%A1%B5.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" ></p>
<h3 id="4-1-引入container布局"><a href="#4-1-引入container布局" class="headerlink" title="4.1 引入container布局"></a>4.1 引入container布局</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-container</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-header</span>&gt;</span>Header<span class="hljs-tag">&lt;/<span class="hljs-name">el-header</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">el-container</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-aside</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;200px&quot;</span>&gt;</span>Aside<span class="hljs-tag">&lt;/<span class="hljs-name">el-aside</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-main</span>&gt;</span>Main<span class="hljs-tag">&lt;/<span class="hljs-name">el-main</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-container</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>添加背景</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.el-header</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#373d41</span>;<br>&#125;<br><span class="hljs-selector-class">.el-aside</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333744</span>;<br>&#125;<br><span class="hljs-selector-class">.el-main</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#eaedf1</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>布局充满</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.home-container</span> &#123;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="4-2-完善Header"><a href="#4-2-完善Header" class="headerlink" title="4.2 完善Header"></a>4.2 完善Header</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-header</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../assets/logo.jpg&quot;</span> <span class="hljs-attr">alt</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo_img&quot;</span> /&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>运动管理平台<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;logout&quot;</span>&gt;</span>安全退出<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">el-header</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.el-header</span> &#123;<br>  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#373d41</span>;<br>  <span class="hljs-attribute">display</span>: flex;<br>  <span class="hljs-attribute">justify-content</span>: space-between;// 左右贴边<br>  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0%</span>;// 左边界<br>  <span class="hljs-attribute">align-items</span>: center;// 水平<br>  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<br>  &gt; <span class="hljs-selector-tag">div</span> &#123; //左侧<span class="hljs-selector-tag">div</span>加布局<br>    <span class="hljs-attribute">display</span>: flex;<br>    <span class="hljs-attribute">align-items</span>: center;<br>    <span class="hljs-selector-tag">span</span> &#123;<br>      <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">15px</span>;<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-selector-class">.logo_img</span>&#123;<br>  <span class="hljs-attribute">width</span>: <span class="hljs-number">55px</span>;<br>  <span class="hljs-attribute">height</span>: <span class="hljs-number">55px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="4-3-左侧菜单布局"><a href="#4-3-左侧菜单布局" class="headerlink" title="4.3 左侧菜单布局"></a>4.3 左侧菜单布局</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-aside</span> <span class="hljs-attr">:width</span>=<span class="hljs-string">&quot;isCollapse ?&#x27;64px&#x27;:&#x27;200px&#x27;&quot;</span>&gt;</span><br>   <span class="hljs-comment">&lt;!--伸缩按钮--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;toggle-button&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleCollapase&quot;</span>&gt;</span>|||<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>   <span class="hljs-comment">&lt;!--侧边栏菜单区 unique-opened=&quot;true&quot; 只保持一个菜单展开 router开启路由--&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span> <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#409eff&quot;</span> 		<span class="hljs-attr">unique-opened</span> <span class="hljs-attr">:collapse</span>=<span class="hljs-string">&quot;isCollapse&quot;</span> <span class="hljs-attr">:collapse-transition</span>=<span class="hljs-string">&quot;false&quot;</span> <span class="hljs-attr">:router</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-submenu</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;item.id+&#x27;&#x27;&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in menuList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;iconsObject[item.id]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;item.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span>  <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;it.id+&#x27;&#x27;&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;it in item.slist&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;it.id&quot;</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;title&quot;</span> &gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;iconsObject[it.id]&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;it.title&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>         <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">el-submenu</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span><br> <span class="hljs-tag">&lt;/<span class="hljs-name">el-aside</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="4-4-访问左侧菜单数据"><a href="#4-4-访问左侧菜单数据" class="headerlink" title="4.4 访问左侧菜单数据"></a>4.4 访问左侧菜单数据</h3><h4 id="4-4-1-页面加载请求数据"><a href="#4-4-1-页面加载请求数据" class="headerlink" title="4.4.1 页面加载请求数据"></a>4.4.1 页面加载请求数据</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"> <span class="hljs-comment">// 类似onload</span><br> <span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>     <span class="hljs-built_in">this</span>.getMenuList();<br> &#125;,<br>methods里面     <br> <span class="hljs-comment">// 获取所有的导航菜单</span><br>   <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getMenuList</span>(<span class="hljs-params"></span>)</span>&#123;<br>     <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span>:res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&quot;menus&quot;</span>);<br>     <span class="hljs-built_in">console</span>.log(res.data);<br>     <span class="hljs-keyword">if</span>( res.status != <span class="hljs-number">200</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">&quot;操作失败！！！&quot;</span>);<br>     <span class="hljs-built_in">this</span>.menuList = res.data;<br>   &#125;,<br></code></pre></td></tr></table></figure>

<h4 id="4-4-2-定义菜单列表对象"><a href="#4-4-2-定义菜单列表对象" class="headerlink" title="4.4.2 定义菜单列表对象"></a>4.4.2 定义菜单列表对象</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 左侧菜单</span><br><span class="hljs-attr">menuList</span>: [],<br><span class="hljs-attr">iconsObject</span>: &#123;<br>   <span class="hljs-string">&#x27;100&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconguanliyuan&#x27;</span>,<br>   <span class="hljs-string">&#x27;200&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconsport&#x27;</span>,<br>   <span class="hljs-string">&#x27;101&#x27;</span>:<span class="hljs-string">&#x27;iconfont icondenglu&#x27;</span>,<br>   <span class="hljs-string">&#x27;102&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconmima&#x27;</span>,<br>   <span class="hljs-string">&#x27;103&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconsport&#x27;</span>,<br>   <span class="hljs-string">&#x27;104&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconshangpin&#x27;</span>,<br>   <span class="hljs-string">&#x27;201&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconshu&#x27;</span>,<br>   <span class="hljs-string">&#x27;202&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconkaluli&#x27;</span>,<br>   <span class="hljs-string">&#x27;203&#x27;</span>:<span class="hljs-string">&#x27;iconfont iconshiwu&#x27;</span>,<br>   <span class="hljs-string">&#x27;204&#x27;</span>:<span class="hljs-string">&#x27;iconfont icondenglu&#x27;</span>,<br>&#125;,<br></code></pre></td></tr></table></figure>

<h4 id="4-4-3-定义menu后台"><a href="#4-4-3-定义menu后台" class="headerlink" title="4.4.3 定义menu后台"></a>4.4.3 定义menu后台</h4><p>bean实体</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubMenu</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String title;<br>    <span class="hljs-keyword">private</span> String path;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainMenu</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;<br>    <span class="hljs-keyword">private</span> String title;<br>    <span class="hljs-keyword">private</span> String path;<br>    List&lt;SubMenu&gt; slist;<br></code></pre></td></tr></table></figure>

<p>控制器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MenuController</span> </span>&#123;<br>    <span class="hljs-meta">@Autowired</span><br>    MenuDao menuDao;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/menus&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getAllMenus</span><span class="hljs-params">()</span></span>&#123;<br>        HashMap&lt;String, Object&gt; data = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>        List&lt;MainMenu&gt; mainMenus = menuDao.getMainMenus();<br>        data.put(<span class="hljs-string">&quot;data&quot;</span>,mainMenus);<br>        data.put(<span class="hljs-string">&quot;status&quot;</span>,<span class="hljs-number">200</span>);<br>        String data_json = JSON.toJSONString(data);<br>        System.out.println(<span class="hljs-string">&quot;成功访问！！！&quot;</span>);<br>        <span class="hljs-keyword">return</span> data_json;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>dao层接口类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MenuDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;MainMenu&gt; <span class="hljs-title">getMainMenus</span><span class="hljs-params">()</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>映射文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper</span>  <span class="hljs-meta-keyword">PUBLIC</span> <span class="hljs-meta-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-meta-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.dao.MenuDao&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--映射实体--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;menuMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.bean.MainMenu&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;id&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;title&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;path&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;path&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">collection</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;slist&quot;</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.bean.SubMenu&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;sid&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;stitle&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;spath&quot;</span>  <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;path&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getMainMenus&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;menuMap&quot;</span>&gt;</span><br>        SELECT mm.*,sm.id as sid ,sm.title as stitle,sm.path as spath FROM mainmenu mm ,submenu sm WHERE mm.id = sm.mid;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-4-4-消除对不齐的线"><a href="#4-4-4-消除对不齐的线" class="headerlink" title="4.4.4 消除对不齐的线"></a>4.4.4 消除对不齐的线</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java">.el-aside &#123;<br>  background-color: #<span class="hljs-number">333744</span>;<br>  .el-menu&#123;<br>    border-right: none;<span class="hljs-comment">// 对其右边框</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="4-5-折叠按钮"><a href="#4-5-折叠按钮" class="headerlink" title="4.5 折叠按钮"></a>4.5 折叠按钮</h3><p>添加折叠按钮</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;toggle-button&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;toggleCollapase&quot;</span>&gt;</span>|||<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>修改按钮样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-class">.toggle-button</span>&#123;<br>  <span class="hljs-attribute">background-color</span>:<span class="hljs-number">#4A5064</span>;<br>  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">10px</span>;<br>  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;<br>  <span class="hljs-attribute">color</span>:<span class="hljs-number">#fff</span>;<br>  <span class="hljs-attribute">text-align</span>: center;<br>  <span class="hljs-attribute">letter-spacing</span>: <span class="hljs-number">0.2em</span>;<br>  <span class="hljs-attribute">cursor</span>: pointer;// 显示鼠标指针为：小手<br>&#125;<br></code></pre></td></tr></table></figure>

<p>定义按键方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 切换菜单折叠与展开</span><br> <span class="hljs-function"><span class="hljs-title">toggleCollapase</span>(<span class="hljs-params"></span>)</span>&#123;<br> <span class="hljs-built_in">this</span>.isCollapse = !<span class="hljs-built_in">this</span>.isCollapse;<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>添加一些属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;active-text-color=&quot;#409eff&quot; unique-opened :collapse=&quot;isCollapse&quot; <br>          :collapse-transition=&quot;false&quot;<br></code></pre></td></tr></table></figure>



<p>修改侧边栏宽度</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-aside</span> <span class="hljs-attr">:width</span>=<span class="hljs-string">&quot;isCollapse ?&#x27;64px&#x27;:&#x27;200px&#x27;&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="4-6-路由重定向"><a href="#4-6-路由重定向" class="headerlink" title="4.6 路由重定向"></a>4.6 路由重定向</h3><h4 id="4-6-1-创建Welcome组价"><a href="#4-6-1-创建Welcome组价" class="headerlink" title="4.6.1 创建Welcome组价"></a>4.6.1 创建Welcome组价</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main_welcome&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Welcome!!!<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript"></span><br><span class="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="javascript">    </span><br><span class="javascript">&#125;</span><br><span class="javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="4-6-2-配置重定向"><a href="#4-6-2-配置重定向" class="headerlink" title="4.6.2 配置重定向"></a>4.6.2 配置重定向</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>  <span class="hljs-attr">component</span>: Home,<br>  <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/welcome&#x27;</span>,<br>  <span class="hljs-attr">children</span>: [<br>    &#123; <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/welcome&#x27;</span>, <span class="hljs-attr">component</span>: Welcome&#125;<br>  ],<br>&#125;,<br></code></pre></td></tr></table></figure>

<h4 id="4-6-3-侧边栏路由链接"><a href="#4-6-3-侧边栏路由链接" class="headerlink" title="4.6.3 侧边栏路由链接"></a>4.6.3 侧边栏路由链接</h4><p>先在侧边栏加入路由属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span> <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#409eff&quot;</span> <span class="hljs-attr">unique-opened</span> <span class="hljs-attr">:collapse</span>=<span class="hljs-string">&quot;isCollapse&quot;</span> <span class="hljs-attr">:collapse-transition</span>=<span class="hljs-string">&quot;false&quot;</span>  <span class="hljs-attr">:router</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>之后修改每一个次级菜单的路径</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span>  <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;it.path+&#x27;&#x27;&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;it in item.slist&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;it.id&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="5、admin组件开发"><a href="#5、admin组件开发" class="headerlink" title="5、admin组件开发"></a>5、admin组件开发</h2><h3 id="5-1-创建user组件"><a href="#5-1-创建user组件" class="headerlink" title="5.1 创建user组件"></a>5.1 创建user组件</h3><p>在components下新建admin文件夹，在admin文件夹下创建<code>user.vue</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>  	userlist!!!<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="5-2-添加新路由"><a href="#5-2-添加新路由" class="headerlink" title="5.2 添加新路由"></a>5.2 添加新路由</h3><p>index.js下home添加新的子组件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>  <span class="hljs-attr">component</span>: Home,<br>  <span class="hljs-attr">redirect</span>: <span class="hljs-string">&#x27;/welcome&#x27;</span>,<br>  <span class="hljs-attr">children</span>: [<br>    &#123; <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/welcome&#x27;</span>, <span class="hljs-attr">component</span>: Welcome&#125;,&#123; <span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/user&#x27;</span>, <span class="hljs-attr">component</span>: User&#125;<br>  ],<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="5-3-路径高亮"><a href="#5-3-路径高亮" class="headerlink" title="5.3 路径高亮"></a>5.3 路径高亮</h3><p>home组件中添加一个新的属性default-active</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span> <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#409eff&quot;</span> <span class="hljs-attr">unique-opened</span> <span class="hljs-attr">:collapse</span>=<span class="hljs-string">&quot;isCollapse&quot;</span> <span class="hljs-attr">:collapse-transition</span>=<span class="hljs-string">&quot;false&quot;</span>  <span class="hljs-attr">:router</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">default-active</span>=<span class="hljs-string">&quot;/user&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>创建<code>连接激活</code>事件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span>  <span class="hljs-attr">:index</span>=<span class="hljs-string">&quot;it.path+&#x27;&#x27;&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;it in item.slist&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;it.id&quot;</span>  @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;saveNavState(it.path+&#x27;&#x27;)&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>创建<code>连接激活</code>属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 被激活的连接</span><br><span class="hljs-attr">activePath</span>:<span class="hljs-string">&#x27;&#x27;</span>,<br></code></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span> <span class="hljs-attr">background-color</span>=<span class="hljs-string">&quot;#545c64&quot;</span> <span class="hljs-attr">text-color</span>=<span class="hljs-string">&quot;#fff&quot;</span> <span class="hljs-attr">active-text-color</span>=<span class="hljs-string">&quot;#409eff&quot;</span> <span class="hljs-attr">unique-opened</span> <span class="hljs-attr">:collapse</span>=<span class="hljs-string">&quot;isCollapse&quot;</span> <span class="hljs-attr">:collapse-transition</span>=<span class="hljs-string">&quot;false&quot;</span>  <span class="hljs-attr">:router</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">:default-active</span>=<span class="hljs-string">&quot;activePath&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure>



<p>创建 <code>连接激活</code>方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">saveNavState</span>(<span class="hljs-params">activePath</span>)</span>&#123;<br>	 <span class="hljs-built_in">window</span>.sessionStorage.setItem(<span class="hljs-string">&#x27;activePath&#x27;</span>,activePath);<span class="hljs-comment">// 存放点击的二级菜单</span><br>     <span class="hljs-built_in">this</span>.activePath = activePath;<span class="hljs-comment">// 给点击的菜单添加高亮</span><br>&#125;,<br></code></pre></td></tr></table></figure>

<p>修改create方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>    <span class="hljs-built_in">this</span>.getMenuList();<br>    <span class="hljs-built_in">this</span>.activePath = <span class="hljs-built_in">window</span>.sessionStorage.getItem(<span class="hljs-string">&#x27;activePath&#x27;</span>);<span class="hljs-comment">// 取出session里的访问路径</span><br>&#125;,<br></code></pre></td></tr></table></figure>

<p><img    class="lazyload" data-original="C:\Users\dz_yk\AppData\Roaming\Typora\typora-user-images\image-20200602152626482.png" src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=="   ><span class="image-caption">image-20200602152626482</span></p>
<h2 id="6、用户列表组件开发"><a href="#6、用户列表组件开发" class="headerlink" title="6、用户列表组件开发"></a>6、用户列表组件开发</h2><h3 id="6-1-面包屑导航区"><a href="#6-1-面包屑导航区" class="headerlink" title="6.1 面包屑导航区"></a>6.1 面包屑导航区</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 面包屑导航 --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator-class</span>=<span class="hljs-string">&quot;el-icon-arrow-right&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>权限管理<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>用户列表<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>   <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p><code>全局样式</code>表里修改样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 面包屑样式 */</span><br><span class="hljs-selector-class">.el-breadcrumb</span>&#123;<br>    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="6-2-卡片视图区"><a href="#6-2-卡片视图区" class="headerlink" title="6.2 卡片视图区"></a>6.2 卡片视图区</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"> <span class="hljs-comment">&lt;!-- 卡片视图区 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-card</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-card</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>全局card样式</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 卡片区域  !important 提高样式级别 */</span><br><span class="hljs-selector-class">.el-card</span>&#123;<br>    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">10</span>, <span class="hljs-number">0.15</span>) <span class="hljs-meta">!important</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>添加搜索组件并且使用栅格</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 卡片视图区 --&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">el-card</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-row</span> <span class="hljs-attr">:gutter</span>=<span class="hljs-string">&quot;25&quot;</span>&gt;</span> 间隙<br>       <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span> 列宽<br>         <span class="hljs-comment">&lt;!-- 搜索添加 --&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入搜索内容&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;queryInfo.query&quot;</span> <span class="hljs-attr">clearable</span> @<span class="hljs-attr">clear</span>=<span class="hljs-string">&quot;getUserList&quot;</span>&gt;</span><br>           <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;append&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-search&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getUserList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>         <span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">el-col</span> <span class="hljs-attr">:span</span>=<span class="hljs-string">&quot;4&quot;</span>&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addDialogVisible = true&quot;</span>&gt;</span>添加用户<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>       <span class="hljs-tag">&lt;/<span class="hljs-name">el-col</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h2 id="7、用户数据获取"><a href="#7、用户数据获取" class="headerlink" title="7、用户数据获取"></a>7、用户数据获取</h2><h3 id="7-1、前台组件"><a href="#7-1、前台组件" class="headerlink" title="7.1、前台组件"></a>7.1、前台组件</h3><p>create方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-function"><span class="hljs-title">created</span>(<span class="hljs-params"></span>)</span> &#123;<br>  <span class="hljs-built_in">this</span>.getUserList();<br>&#125;,<br></code></pre></td></tr></table></figure>

<p>获取用户方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">getUserList</span>(<span class="hljs-params"></span>)</span> &#123;<br>     <span class="hljs-comment">// 调用post请求</span><br>     <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">data</span>: res &#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&quot;allUser&quot;</span>, &#123;<br>       <span class="hljs-attr">params</span>: <span class="hljs-built_in">this</span>.queryInfo<br>     &#125;);<br>     <span class="hljs-built_in">this</span>.userlist = res.data; <span class="hljs-comment">// 将返回数据赋值</span><br>     <span class="hljs-built_in">this</span>.total = res.numbers; <span class="hljs-comment">// 总个数</span><br>   &#125;,<br></code></pre></td></tr></table></figure>

<p>封装查询方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"> <span class="hljs-comment">// 请求数据</span><br><span class="hljs-attr">queryInfo</span>: &#123;<br>  <span class="hljs-attr">query</span>: <span class="hljs-string">&quot;&quot;</span>,<br>  <span class="hljs-attr">pageNum</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">pageSize</span>: <span class="hljs-number">5</span><br>&#125;,<br><span class="hljs-attr">userlist</span>: [],<span class="hljs-comment">// 用户列表</span><br><span class="hljs-attr">total</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 最大数据记录</span><br></code></pre></td></tr></table></figure>

<h3 id="7-2、用户列表后台"><a href="#7-2、用户列表后台" class="headerlink" title="7.2、用户列表后台"></a>7.2、用户列表后台</h3><p>控制层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/allUser&quot;)</span><br> <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUserList</span><span class="hljs-params">(QueryInfo queryInfo)</span></span>&#123;<br>     System.out.println(queryInfo);<br>     <span class="hljs-keyword">int</span> numbers = userDao.getUserCounts(<span class="hljs-string">&quot;%&quot;</span>+queryInfo.getQuery()+<span class="hljs-string">&quot;%&quot;</span>);<span class="hljs-comment">// 获取数据总数</span><br>     <span class="hljs-keyword">int</span> pageStart = (queryInfo.getPageNum()-<span class="hljs-number">1</span>)*queryInfo.getPageSize();<br>     List&lt;User&gt; users = userDao.getAllUser(<span class="hljs-string">&quot;%&quot;</span>+queryInfo.getQuery()+<span class="hljs-string">&quot;%&quot;</span>,pageStart,queryInfo.getPageSize());<br>     HashMap&lt;String, Object&gt; res = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();<br>     res.put(<span class="hljs-string">&quot;numbers&quot;</span>,numbers);<br>     res.put(<span class="hljs-string">&quot;data&quot;</span>,users);<br>     System.out.println(<span class="hljs-string">&quot;总条数：&quot;</span>+numbers);<br>     String users_json = JSON.toJSONString(res);<br>     <span class="hljs-keyword">return</span> users_json;<br> &#125;<br></code></pre></td></tr></table></figure>

<p>dao层</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserByMassage</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;username&quot;)</span> String username, <span class="hljs-meta">@Param(&quot;password&quot;)</span> String password)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title">getAllUser</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;username&quot;)</span> String username,<span class="hljs-meta">@Param(&quot;pageStart&quot;)</span> <span class="hljs-keyword">int</span> pageStart, <span class="hljs-meta">@Param(&quot;pageSize&quot;)</span> <span class="hljs-keyword">int</span> pageSize)</span></span>;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getUserCounts</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;username&quot;)</span> String username)</span></span>;<br></code></pre></td></tr></table></figure>

<p>Mapper映射文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getAllUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.bean.User&quot;</span>&gt;</span><br>   	SELECT * FROM easyUser<br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username !=null &quot;</span>&gt;</span><br>        WHERE username like #&#123;username&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br>    LIMIT #&#123;pageStart&#125;,#&#123;pageSize&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUserCounts&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;java.lang.Integer&quot;</span>&gt;</span><br>   	SELECT count(*) FROM `easyuser`<br>    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">&quot;username !=null &quot;</span>&gt;</span><br>        WHERE username like #&#123;username&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>查询信息实体</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">QueryInfo</span> </span>&#123;<br><span class="hljs-keyword">private</span> String query;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pageNum=<span class="hljs-number">1</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> pageSize=<span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure>

<h3 id="7-3、用户列表渲染"><a href="#7-3、用户列表渲染" class="headerlink" title="7.3、用户列表渲染"></a>7.3、用户列表渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 用户列表  border 边框 stripe 隔行变色 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">&quot;userlist&quot;</span> <span class="hljs-attr">border</span> <span class="hljs-attr">stripe</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><span class="hljs-comment">&lt;!--索引列--&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;姓名&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;邮箱&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;密码&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;角色&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;role&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;状态&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;state&quot;</span>&gt;</span><br>     <span class="hljs-comment">&lt;!--作用域插槽 scope.row 存储了当前行的信息 --&gt;</span><br>         <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;scope&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--数据模板--&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-switch</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;scope.row.state&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-switch</span>&gt;</span><br>         <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br>	 <span class="hljs-comment">&lt;!--自定义插槽--&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;操作&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;scope&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 修改 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-edit&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;mini&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showEditDialog(scope.row.id)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 删除 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-delete&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;mini&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deleteUser(scope.row.id)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 权限 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-tooltip</span> <span class="hljs-attr">effect</span>=<span class="hljs-string">&quot;dark&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;分配权限&quot;</span> <span class="hljs-attr">placement</span>=<span class="hljs-string">&quot;top-start&quot;</span> <span class="hljs-attr">:enterable</span>=<span class="hljs-string">&quot;false&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--文字提示 enterable 隐藏--&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-setting&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;mini&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tooltip</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>	<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="7-4、全局表格样式"><a href="#7-4、全局表格样式" class="headerlink" title="7.4、全局表格样式"></a>7.4、全局表格样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 表格样式 */</span><br><span class="hljs-selector-class">.el-table</span> &#123;<br>    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">15px</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;<br>    <span class="hljs-attribute">min-width</span>: <span class="hljs-number">350px</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="8、分页组件"><a href="#8、分页组件" class="headerlink" title="8、分页组件"></a>8、分页组件</h2><h3 id="8-1、分页组件渲染"><a href="#8-1、分页组件渲染" class="headerlink" title="8.1、分页组件渲染"></a>8.1、分页组件渲染</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 分页 size-change 每页最大数变化 current-change 页数变化 layout 功能组件--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span></span><br><span class="hljs-tag">        @<span class="hljs-attr">size-change</span>=<span class="hljs-string">&quot;handleSizeChange&quot;</span></span><br><span class="hljs-tag">        @<span class="hljs-attr">current-change</span>=<span class="hljs-string">&quot;handleCurrentChange&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:current-page</span>=<span class="hljs-string">&quot;queryInfo.pageNum&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:page-sizes</span>=<span class="hljs-string">&quot;[1, 2, 5, 100]&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:page-size</span>=<span class="hljs-string">&quot;queryInfo.pageSize&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">layout</span>=<span class="hljs-string">&quot;total, sizes, prev, pager, next, jumper&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">:total</span>=<span class="hljs-string">&quot;total&quot;</span></span><br><span class="hljs-tag">&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-pagination</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="8-2、相关方法"><a href="#8-2、相关方法" class="headerlink" title="8.2、相关方法"></a>8.2、相关方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 监听pageSize改变的事件</span><br>handleSizeChange(newSize) &#123;<br>	<span class="hljs-keyword">this</span>.queryInfo.pageSize = newSize;<br>	<span class="hljs-keyword">this</span>.getUserList(); <span class="hljs-comment">// 数据发生改变重新申请数据</span><br>&#125;,<br><span class="hljs-comment">// 监听pageNum改变的事件</span><br>handleCurrentChange(newPage) &#123;<br>	<span class="hljs-keyword">this</span>.queryInfo.pageNum = newPage;<br>	<span class="hljs-keyword">this</span>.getUserList(); <span class="hljs-comment">// 数据发生改变重新申请数据</span><br>&#125;,<br></code></pre></td></tr></table></figure>

<h2 id="9、用户状态修改"><a href="#9、用户状态修改" class="headerlink" title="9、用户状态修改"></a>9、用户状态修改</h2><h3 id="9-1、绑定change方法"><a href="#9-1、绑定change方法" class="headerlink" title="9.1、绑定change方法"></a>9.1、绑定change方法</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!--作用域插槽 scope.row 存储了当前行的信息 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;scope&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--数据模板--&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">el-switch</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;scope.row.state&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;userStateChanged(scope.row)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-switch</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="9-2、创建changeState方法"><a href="#9-2、创建changeState方法" class="headerlink" title="9.2、创建changeState方法"></a>9.2、创建changeState方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 修改用户状态</span><br><span class="hljs-function">async <span class="hljs-title">userStateChanged</span><span class="hljs-params">(userinfo)</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> &#123; data: res &#125; = await <span class="hljs-keyword">this</span>.$http.put(<br>        `userState?id=$&#123;userinfo.id&#125;&amp;state=$&#123;userinfo.state&#125;`<br>    );<br>    <span class="hljs-keyword">if</span> (res != <span class="hljs-string">&quot;success&quot;</span>) &#123;<br>        userinfo.state = !userinfo.state;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.$message.error(<span class="hljs-string">&quot;操作失败！！！&quot;</span>);<br>      &#125;<br>    <span class="hljs-keyword">this</span>.$message.success(<span class="hljs-string">&quot;操作成功！！！&quot;</span>);<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="9-3、修改状态后台"><a href="#9-3、修改状态后台" class="headerlink" title="9.3、修改状态后台"></a>9.3、修改状态后台</h3><h4 id="dao层编写接口"><a href="#dao层编写接口" class="headerlink" title="dao层编写接口"></a>dao层编写接口</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">updateState</span><span class="hljs-params">(Integer id, Boolean state)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="dao的映射文件"><a href="#dao的映射文件" class="headerlink" title="dao的映射文件"></a>dao的映射文件</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;updateState&quot;</span>&gt;</span><br>   UPDATE easyuser SET state = #&#123;state&#125; WHERE id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h4 id="controller层编写"><a href="#controller层编写" class="headerlink" title="controller层编写"></a>controller层编写</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/userState&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateUserState</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;id&quot;)</span> Integer  id,</span></span><br><span class="hljs-params"><span class="hljs-function">                                  <span class="hljs-meta">@RequestParam(&quot;state&quot;)</span> Boolean state)</span></span>&#123;<br>	<span class="hljs-keyword">int</span> i = userDao.updateState(id, state);<br>	String str = i &gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;success&quot;</span>:<span class="hljs-string">&quot;error&quot;</span>;<br>	<span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="10、搜索功能实现"><a href="#10、搜索功能实现" class="headerlink" title="10、搜索功能实现"></a>10、搜索功能实现</h2><h3 id="10-1、搜索组件完善"><a href="#10-1、搜索组件完善" class="headerlink" title="10.1、搜索组件完善"></a>10.1、搜索组件完善</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 搜索添加 双向绑定搜索信息 clearable 清除功能 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;请输入搜索内容&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;queryInfo.query&quot;</span> <span class="hljs-attr">clearable</span> @<span class="hljs-attr">clear</span>=<span class="hljs-string">&quot;getUserList&quot;</span>&gt;</span><br>	<span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;append&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-search&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;getUserList&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="10-2、新建用户对话框"><a href="#10-2、新建用户对话框" class="headerlink" title="10.2、新建用户对话框"></a>10.2、新建用户对话框</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 创建新用户对话框 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;添加用户&quot;</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">&quot;addDialogVisible&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;50%&quot;</span></span><br><span class="hljs-tag">    @<span class="hljs-attr">close</span>=<span class="hljs-string">&quot;addDialogClosed&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 内容主体区域 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;addForm&quot;</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;addFormRules&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;addFormRef&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;70px&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 用户名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;用户名&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;addForm.username&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 密码 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;密码&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;addForm.password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 邮箱 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;邮箱&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;addForm.email&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- 内容底部区域 --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;footer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dialog-footer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addDialogVisible = false&quot;</span>&gt;</span>取 消<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addUser&quot;</span>&gt;</span>确 定<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>添加对话框属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">addDialogVisible: <span class="hljs-literal">false</span> ,<span class="hljs-comment">// 对话框显示</span><br><span class="hljs-comment">// 添加用户表单项</span><br><span class="hljs-attr">addForm</span>: &#123;<br>        <span class="hljs-attr">username</span>:<span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">password</span>:<span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">email</span>:<span class="hljs-string">&#x27;&#x27;</span>,<br>      &#125;, <br>      <span class="hljs-comment">// 验证规则</span><br>      <span class="hljs-attr">addFormRules</span>:&#123;<br>        <span class="hljs-attr">username</span>:[<br>           &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入用户名&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,<br>          &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;长度在 5 到 8 个字符&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;<br>        ],<br>        <span class="hljs-attr">password</span>:[<br>           &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入密码&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,<br>          &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;长度在 6 到 8 个字符&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;<br>        ],<br>        <span class="hljs-attr">email</span>:[<br>           &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入邮箱&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,<br>          &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入正确邮箱地址&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;<br>        ],<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="10-3、添加用户方法"><a href="#10-3、添加用户方法" class="headerlink" title="10.3、添加用户方法"></a>10.3、添加用户方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"> <span class="hljs-comment">// 监听添加用户</span><br><span class="hljs-function"><span class="hljs-title">addDialogClosed</span>(<span class="hljs-params"></span>)</span>&#123;<br>   <span class="hljs-built_in">this</span>.$refs.addFormRef.resetFields();<span class="hljs-comment">// 重置表单项</span><br>&#125;,<br><span class="hljs-comment">// 添加用户</span><br><span class="hljs-function"><span class="hljs-title">addUser</span>(<span class="hljs-params"></span>)</span>&#123;<br>      <span class="hljs-built_in">this</span>.$refs.addFormRef.validate(<span class="hljs-keyword">async</span> valid =&gt;&#123;<br>      <span class="hljs-built_in">console</span>.log(valid);<br>      <span class="hljs-keyword">if</span>( !valid ) <span class="hljs-keyword">return</span>;<br>      <span class="hljs-comment">// 发起请求</span><br>      <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span>:res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.post(<span class="hljs-string">&quot;addUser&quot;</span>,<span class="hljs-built_in">this</span>.addForm);<br>      <span class="hljs-keyword">if</span> (res != <span class="hljs-string">&quot;success&quot;</span>) &#123;<br>      userinfo.state = !userinfo.state;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">&quot;操作失败！！！&quot;</span>);<br>      &#125;<br>      <span class="hljs-built_in">this</span>.$message.success(<span class="hljs-string">&quot;操作成功！！！&quot;</span>);<br>      <span class="hljs-comment">//隐藏</span><br>      <span class="hljs-built_in">this</span>.addDialogVisible = <span class="hljs-literal">false</span>;<br>      <span class="hljs-built_in">this</span>.getUserList();<br>  &#125;)<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="10-4、添加用户dao"><a href="#10-4、添加用户dao" class="headerlink" title="10.4、添加用户dao"></a>10.4、添加用户dao</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">addUser</span><span class="hljs-params">(User user)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>对应Mapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addUser&quot;</span>&gt;</span><br>    INSERT INTO easyuser<br>    (username,password,email,role,state)<br>    VALUE<br>    (#&#123;username&#125;,#&#123;password&#125;,#&#123;email&#125;,#&#123;role&#125;,#&#123;state&#125;)<br><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="10-5、添加用户Controll"><a href="#10-5、添加用户Controll" class="headerlink" title="10.5、添加用户Controll"></a>10.5、添加用户Controll</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/addUser&quot;)</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">addUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span></span>&#123;<br>    System.out.println(user);<br>    user.setRole(<span class="hljs-string">&quot;普通用户&quot;</span>);<br>    user.setState(<span class="hljs-keyword">false</span>);<br>    <span class="hljs-keyword">int</span> i = userDao.addUser(user);<br>    String str = i &gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;success&quot;</span>:<span class="hljs-string">&quot;error&quot;</span>;<br>    <span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="11、修改用户"><a href="#11、修改用户" class="headerlink" title="11、修改用户"></a>11、修改用户</h2><h3 id="11-1、修改用户dao层"><a href="#11-1、修改用户dao层" class="headerlink" title="11.1、修改用户dao层"></a>11.1、修改用户dao层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> User <span class="hljs-title">getUpdateUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<span class="hljs-comment">// 获取修改用户的原本信息</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">editUser</span><span class="hljs-params">(User user)</span></span>;<span class="hljs-comment">// 修改用户</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="11-2、修改用户Mapper"><a href="#11-2、修改用户Mapper" class="headerlink" title="11.2、修改用户Mapper"></a>11.2、修改用户Mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUpdateUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.naughty.userlogin02.bean.User&quot;</span>&gt;</span><br>	SELECT * FROM easyuser WHERE id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;editUser&quot;</span>&gt;</span><br>	UPDATE easyuser SET username = #&#123;username&#125; , password = #&#123;password&#125; ,<br>	email = #&#123;email&#125; WHERE id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="11-3、修改用户Controller"><a href="#11-3、修改用户Controller" class="headerlink" title="11.3、修改用户Controller"></a>11.3、修改用户Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/getUpdate&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getUpdateUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>&#123;<br>	System.out.println(<span class="hljs-string">&quot;编号:&quot;</span>+id);<br>	User updateUser = userDao.getUpdateUser(id);<br>	String users_json = JSON.toJSONString(updateUser);<br>	<span class="hljs-keyword">return</span> users_json;<br>&#125;<br><br><span class="hljs-meta">@RequestMapping(&quot;/editUser&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">editUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> User user)</span></span>&#123;<br>	System.out.println(user);<br>	<span class="hljs-keyword">int</span> i = userDao.editUser(user);<br>	String str = i &gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;success&quot;</span>:<span class="hljs-string">&quot;error&quot;</span>;<br>	<span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="11-4、添加修改属性"><a href="#11-4、添加修改属性" class="headerlink" title="11.4、添加修改属性"></a>11.4、添加修改属性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 修改用户信息</span><br><span class="hljs-attr">editForm</span>:&#123;&#125;,<br><span class="hljs-comment">// 控制修改用户对话框显示/隐藏</span><br><span class="hljs-attr">editDialogVisible</span>:<span class="hljs-literal">false</span>,<br><span class="hljs-comment">// 修改用户表单验证规则</span><br><span class="hljs-attr">editFormRules</span>:&#123;<br>	<span class="hljs-attr">password</span>:[<br>		&#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入密码&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,<br>		&#123; <span class="hljs-attr">min</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;长度在 6 到 8 个字符&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;<br>	],<br>	<span class="hljs-attr">email</span>:[<br>		&#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入邮箱&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;,<br>		&#123; <span class="hljs-attr">min</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">15</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&quot;请输入正确邮箱地址&quot;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&quot;blur&quot;</span> &#125;<br>	],<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="11-5、实现修改方法"><a href="#11-5、实现修改方法" class="headerlink" title="11.5、实现修改方法"></a>11.5、实现修改方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 展示修改框</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">showEditDialog</span>(<span class="hljs-params">id</span>)</span>&#123;<br>	<span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span>:res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.get(<span class="hljs-string">&quot;getUpdate?id=&quot;</span>+id);<br>	<span class="hljs-built_in">this</span>.editForm = res;<br>	<span class="hljs-built_in">this</span>.editDialogVisible = <span class="hljs-literal">true</span>;<br>&#125;,<br><span class="hljs-comment">// 关闭窗口</span><br><span class="hljs-function"><span class="hljs-title">editDialogClosed</span>(<span class="hljs-params"></span>)</span>&#123;<br>	<span class="hljs-built_in">this</span>.$refs.editFormRef.resetFields();<br>&#125;,<br><span class="hljs-comment">// 确认修改</span><br><span class="hljs-function"><span class="hljs-title">editUserInfo</span>(<span class="hljs-params"></span>)</span>&#123;<br>	<span class="hljs-built_in">this</span>.$refs.editFormRef.validate(<span class="hljs-keyword">async</span> valid =&gt;&#123;<br>        <span class="hljs-built_in">console</span>.log(valid);<br>        <span class="hljs-keyword">if</span>( !valid ) <span class="hljs-keyword">return</span>;<br>        <span class="hljs-comment">// 发起请求</span><br>        <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span>:res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.put(<span class="hljs-string">&quot;editUser&quot;</span>,<span class="hljs-built_in">this</span>.editForm);<br>        <span class="hljs-built_in">console</span>.log(res);<br>        <span class="hljs-keyword">if</span> (res != <span class="hljs-string">&quot;success&quot;</span>) <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">&quot;操作失败！！！&quot;</span>);<br>        <span class="hljs-built_in">this</span>.$message.success(<span class="hljs-string">&quot;操作成功！！！&quot;</span>);<br>        <span class="hljs-comment">//隐藏</span><br>        <span class="hljs-built_in">this</span>.editDialogVisible = <span class="hljs-literal">false</span>;<br>        <span class="hljs-built_in">this</span>.getUserList();<br>	&#125;);<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="11-6、绘制修改对话框"><a href="#11-6、绘制修改对话框" class="headerlink" title="11.6、绘制修改对话框"></a>11.6、绘制修改对话框</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 修改用户对话框 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;修改用户信息&quot;</span> <span class="hljs-attr">:visible.sync</span>=<span class="hljs-string">&quot;editDialogVisible&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;50%&quot;</span> @<span class="hljs-attr">colse</span>=<span class="hljs-string">&quot;editDialogClosed&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;editForm&quot;</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;editFormRules&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;editFormRef&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;70px&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 用户名 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;用户名&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;username&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;editForm.username&quot;</span> <span class="hljs-attr">disabled</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 密码 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;密码&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;editForm.password&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 邮箱 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;邮箱&quot;</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;email&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;editForm.email&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;footer&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dialog-footer&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;editDialogVisible = false&quot;</span>&gt;</span>取 消<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;editUserInfo&quot;</span>&gt;</span>确 定<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="11-7、编辑按钮激活修改页面"><a href="#11-7、编辑按钮激活修改页面" class="headerlink" title="11.7、编辑按钮激活修改页面"></a>11.7、编辑按钮激活修改页面</h3><p>点击编辑按钮会获取该行用户的信息，然后进行编辑。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">&lt;el-button type=<span class="hljs-string">&quot;primary&quot;</span> icon=<span class="hljs-string">&quot;el-icon-edit&quot;</span> size=<span class="hljs-string">&quot;mini&quot;</span> <span class="hljs-meta">@click</span>=<span class="hljs-string">&quot;showEditDialog(scope.row.id)&quot;</span>&gt;&lt;/el-button&gt;<br></code></pre></td></tr></table></figure>

<h2 id="12、删除用户"><a href="#12、删除用户" class="headerlink" title="12、删除用户"></a>12、删除用户</h2><h3 id="12-1、删除用户dao层"><a href="#12-1、删除用户dao层" class="headerlink" title="12.1、删除用户dao层"></a>12.1、删除用户dao层</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Repository</span><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserDao</span> </span>&#123;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="12-2、删除用户Mapper"><a href="#12-2、删除用户Mapper" class="headerlink" title="12.2、删除用户Mapper"></a>12.2、删除用户Mapper</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deleteUser&quot;</span>&gt;</span><br>	DELETE FROM easyuser WHERE id = #&#123;id&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br></code></pre></td></tr></table></figure>

<h3 id="12-3、删除用户Controller"><a href="#12-3、删除用户Controller" class="headerlink" title="12.3、删除用户Controller"></a>12.3、删除用户Controller</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/deleteUser&quot;)</span><br><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">deleteUser</span><span class="hljs-params">(<span class="hljs-keyword">int</span> id)</span></span>&#123;<br>	<span class="hljs-keyword">int</span> i = userDao.deleteUser(id);<br>	String str = i &gt;<span class="hljs-number">0</span>?<span class="hljs-string">&quot;success&quot;</span>:<span class="hljs-string">&quot;error&quot;</span>;<br>	<span class="hljs-keyword">return</span> str;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="12-4、删除事件"><a href="#12-4、删除事件" class="headerlink" title="12.4、删除事件"></a>12.4、删除事件</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 删除按钮</span><br><span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">deleteUser</span>(<span class="hljs-params">id</span>)</span>&#123;<br>	<span class="hljs-comment">// 弹框</span><br>    <span class="hljs-keyword">const</span> confirmResult = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$confirm(<span class="hljs-string">&#x27;此操作将永久删除该用户, 是否继续?&#x27;</span>, <span class="hljs-string">&#x27;提示&#x27;</span>, &#123;<br>          <span class="hljs-attr">confirmButtonText</span>: <span class="hljs-string">&#x27;确定&#x27;</span>,<br>          <span class="hljs-attr">cancelButtonText</span>: <span class="hljs-string">&#x27;取消&#x27;</span>,<br>          <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;warning&#x27;</span><br>    &#125;).catch(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> err)<br>    <span class="hljs-comment">// 成功删除为confirm 取消为 cancel</span><br>    <span class="hljs-keyword">if</span>(confirmResult!=<span class="hljs-string">&#x27;confirm&#x27;</span>)&#123;<br>       <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$message.info(<span class="hljs-string">&quot;已取消删除&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">const</span> &#123;<span class="hljs-attr">data</span>:res&#125; = <span class="hljs-keyword">await</span> <span class="hljs-built_in">this</span>.$http.delete(<span class="hljs-string">&quot;deleteUser?id=&quot;</span>+id);<br>    <span class="hljs-keyword">if</span> (res != <span class="hljs-string">&quot;success&quot;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">&quot;操作失败！！！&quot;</span>);<br>    &#125;<br>    <span class="hljs-built_in">this</span>.$message.success(<span class="hljs-string">&quot;操作成功！！！&quot;</span>);<br>    <span class="hljs-built_in">this</span>.getUserList();<br>&#125;,<br></code></pre></td></tr></table></figure>

<h3 id="12-5、删除按钮添加删除"><a href="#12-5、删除按钮添加删除" class="headerlink" title="12.5、删除按钮添加删除"></a>12.5、删除按钮添加删除</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 删除 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-delete&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;mini&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deleteUser(scope.row.id)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br></code></pre></td></tr></table></figure>












































      </section>
      <section class="extra">
        
          <ul class="copyright">
  
    <li><strong>本文作者：</strong>thyme1228</li>
    <li><strong>本文链接：</strong><a href="https://thyme1228.github.io/2021/07/12/%E4%B8%AA%E4%BA%BA%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE/index.html" title="https:&#x2F;&#x2F;thyme1228.github.io&#x2F;2021&#x2F;07&#x2F;12&#x2F;%E4%B8%AA%E4%BA%BA%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE&#x2F;index.html">https:&#x2F;&#x2F;thyme1228.github.io&#x2F;2021&#x2F;07&#x2F;12&#x2F;%E4%B8%AA%E4%BA%BA%E8%BF%90%E8%A1%8C%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE&#x2F;index.html</a></li>
    <li><strong>版权声明：</strong>本博客所有文章均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" title="BY-NC-SA" target="_blank" rel="noopener">BY-NC-SA</a> 许可协议，转载请注明出处！</li>
  
</ul>
        
        
        
        
  <nav class="nav">
    <a></a>
    <a href="/2021/07/07/Java%E9%9D%A2%E8%AF%95%E9%A2%98/">Java面试题<i class="iconfont iconright"></i></a>
  </nav>

      </section>
      
    </section>
  </div>
</article></div>
      <div class="col-xl-3">
        
          
  <aside class="toc-wrap">
    <h3 class="toc-title">文章目录：</h3>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E8%BF%90%E5%8A%A8%E5%B9%B3%E5%8F%B0%E9%A1%B9%E7%9B%AE"><span class="toc-text">个人运动平台项目</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E9%A1%B9%E7%9B%AE%E6%A6%82%E8%BF%B0"><span class="toc-text">1、项目概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%A1%86%E6%9E%B6%E6%90%AD%E5%BB%BA"><span class="toc-text">2、框架搭建</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%AE%8C%E5%96%84%E7%99%BB%E5%BD%95"><span class="toc-text">3、完善登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81Home%E9%A1%B5%E5%BC%80%E5%8F%91"><span class="toc-text">4、Home页开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81admin%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="toc-text">5、admin组件开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6%E5%BC%80%E5%8F%91"><span class="toc-text">6、用户列表组件开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7%E3%80%81%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-text">7、用户数据获取</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%E3%80%81%E5%88%86%E9%A1%B5%E7%BB%84%E4%BB%B6"><span class="toc-text">8、分页组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9%E3%80%81%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81%E4%BF%AE%E6%94%B9"><span class="toc-text">9、用户状态修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10%E3%80%81%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-text">10、搜索功能实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11%E3%80%81%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7"><span class="toc-text">11、修改用户</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12%E3%80%81%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-text">12、删除用户</span></a></li></ol></li></ol>
  </aside>

        
      </div>
    </div>
  </div>
</main>
  

<footer class="footer">
  <div class="footer-social"><a 
        href="tencent://message/?Menu=yes&uin=894519210 "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#12B7F5'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconQQ "></i>
      </a><a 
        href="javascript:; "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#09BB07'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconwechat-fill "></i>
      </a><a 
        href="https://www.instagram.com/izhaoo/ "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#DA2E76'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconinstagram "></i>
      </a><a 
        href="https://github.com/zhaoo "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color= '#9f7be1'" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  icongithub-fill "></i>
      </a><a 
        href="mailto:izhaoo@163.com "
        target="_blank"
        class="footer-social-item"
        onMouseOver="this.style.color=#FF3B00" 
        onMouseOut="this.style.color='#33333D'">
          <i class="iconfont  iconmail"></i>
      </a></div>
  
    <div class="footer-copyright"><p>Powered by <a target="_blank" href="https://hexo.io">Hexo</a>  |  Theme - <a target="_blank" href="https://github.com/izhaoo/hexo-theme-zhaoo">zhaoo</a></p></div>
  
</footer>
  
      <div class="fab fab-plus">
    <i class="iconfont iconplus"></i>
  </div>
  
  
  <div class="fab fab-up">
    <i class="iconfont iconcaret-up"></i>
  </div>
  
  
  
    
<script src="/js/color-mode.js"></script>

  
  
</body>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>



  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>




  
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>






  
<script src="https://cdn.bootcdn.net/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>




<script src="/js/utils.js"></script>
<script src="/js/script.js"></script>







  <script>
    (function () {
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
      } else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>













</html>